<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="_PRVW__1950a5262487001029951ec2396af9fb">1550a526db870010ba19c4ab0b9619fc</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"03815abcae624a8aa6490e82793ad010","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"03815abcae624a8aa6490e82793ad010"}],"goals":[{"name":"primary","trigger_id":"03815abcae624a8aa6490e82793ad010","nodes":[{"type":"StartGoal","goal_id":"c3e72985ce6a491db0b589d349af2fc9","greeting_msg":{"type":"String","mode":"string","value":"I can help you find and update NeedIt records for a type of request."},"id":"1c72ac645df14685a294621ede9aa36f","name":"Start"},{"type":"TerminateGoal","goal_id":"c3e72985ce6a491db0b589d349af2fc9","confirmation_msg":{"type":"String","mode":"string","value":"Ask again when you need to update other NeedIt records."},"id":"929b0d7d80434eb682a5d11ec2b16dc0","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"0249c661ba9d47b1b2fe236e735762c8","name":"NeedIt Type","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"315d582aa9624faabd40396f068d7084","message":{"type":"String","mode":"string","value":"Which type of NeedIt record would you like to view?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    // Return the display value (Label) for the needit_type choice\n\treturn 'You selected: ' + vaInputs.needit_type.getDisplayValue();\n})()\n"},"id":"dcfd967a5706455d83de01170f101794","name":"Confirm NeedIt Type","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ReferenceChoiceInputPrompt","mode":"external","id":"8d17ef08a756404bb34b405e8581bc9a","name":"NeedIt List","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"b8a70c06ddda4589810be72afb2c1099","message":{"type":"String","mode":"string","value":"Select a record to view."},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"expression_mode":"script","script":"(function execute(table) {\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n","no_options_found_message":{"type":"String","mode":"string","value":"You have no open NeedIt records."},"condition":{"type":"Condition","mode":"glide_scripted_query","value":"(function execute(table) {\n\t    // Initialize an array for the list of NeedIt records to show\n\t    var options = [];\n\t\n\t    // Query the table selected in the Table field for active records with the \n\t    // u_request_type selected in the NeedIt Type node where the user is the \n\t    // u_requested_for. Order the results by the When needed value.\n\t    var grNI = new GlideRecord(table);\n\t    grNI.addQuery('u_request_type',vaInputs.needit_type.getValue());\n\t    grNI.addQuery('active','true');\n\t    grNI.addQuery('u_requested_for',vaInputs.user);\n\t    grNI.orderBy('u_when_needed');\n\t    grNI.query();\n\t\n\t    // Push a value and label pair to the array for each record the query returns.\n\t    // The value is the unique value. The label is the number, u_when_needed, and \t\t    // short_description values for the NeedIt record.\n\t    while(grNI.next()) {\n\t        options.push({ 'value': grNI.getUniqueValue(), 'label': grNI.getValue('number') + \" (\" + grNI.getDisplayValue('u_when_needed') + \"): \" + grNI.getValue('short_description') });\n\t    }\n\t\n\t    // Return the array\n\t    return options;\n})(table)\n"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"b8a70c06ddda4589810be72afb2c1099","fields":["priority","short_description","u_when_needed"],"id":"762737d6e67244f5b7c6bef69326a2b2","name":"NeedIt Card","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"InputPrompt","variable_id":"6c358ae98d2546cca40d0268f4279c2a","message":{"type":"String","mode":"string","value":"Would you like to view another NeedIt Record?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"f6baf0ba8886488688c706f59084c793","name":"Search Again","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Find more NeedIt records?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"search_again!=true"},"id":"92003a931eef412a8a975dc5bcaf8f32","name":"No"},{"type":"Branch","label":"yes","expression":{"type":"Applicability","mode":"query","value":"search_again=true"},"id":"530aae7fd7774b55b3a9e47fca476fd2","name":"yes"}],"id":"d1e61be74d0744d085db56d7f31c9b98","goal_id":"c3e72985ce6a491db0b589d349af2fc9"},{"type":"InputPrompt","variable_id":"33a881c786f6400b86becbba815ebab0","message":{"type":"String","mode":"string","value":"When do you need the NeedIt completed?"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"190cc26900ca4fc098b475fd2060f159","name":"New When Needed Date","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"u_when_needed={{vaInputs.new_when_needed_date}}","variable_id":"b8a70c06ddda4589810be72afb2c1099","id":"3ec51878f4ed448e81d313dc366e59e5","name":"Change When Needed Date","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"Got it. I'll update your record!"},"id":"a658110a0a5648f9ba7fd2f49473e0d1","name":"Update When NeedIt Response","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"x_58872_needit_needit","variable_id":"b8a70c06ddda4589810be72afb2c1099","fields":["priority","short_description","u_when_needed"],"id":"79537b3a01324dd68f9e4937dd9698e1","name":"Updated NeedIt Card","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"","value":""}},{"type":"Decision","name":"What would you like to update?","branches":[{"type":"Branch","label":"Date","expression":{"type":"Applicability","mode":"query","value":"update_choice=date"},"id":"f423cffefb1c4c38b3b4fee2d8987713","name":"Date"},{"type":"Branch","label":"Short Description","expression":{"type":"Applicability","mode":"query","value":"update_choice=short_description"},"id":"1d701b2968af420f98f60debbeb19543","name":"Short Description"},{"type":"Branch","label":"Nothing","expression":{"type":"Applicability","mode":"query","value":"update_choice=nothing"},"id":"a90c8297ad2e4b0baae718fe7e0177a9","name":"Nothing"}],"id":"f06875a5d1ac486a8fec785211e6d28f","goal_id":"c3e72985ce6a491db0b589d349af2fc9"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"62c57f5150a445b0ac4ff95c019d9d0c","name":"Update Choice","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"a1bc920cc0d54b639e9db6d5b20e5eef","message":{"type":"String","mode":"string","value":"What would you like to update?"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"InputPrompt","variable_id":"7d692a7c58e64f5282474e4579aee7f4","message":{"type":"String","mode":"string","value":"What shall I put into the short description?"},"confirmation":{"type":"String","mode":"string","value":"Got it!"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"17767f6db4284709b0b5a4a107d553e7","name":"New Short Description","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"update","query":"short_description={{vaInputs.new_short_description}}","variable_id":"b8a70c06ddda4589810be72afb2c1099","id":"98c8a2dacfb241e891c8e8e60fa7dc95","name":"Change Short Description","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"Got it!"},"id":"224818aaf4d141b09d2edad8f6213d1d","name":"Nothing Response","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"Got it. I'll put that as new short description into your recor! "},"id":"741163ecc88d4ad69886c08c9d214c86","name":"Got it Response","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"ScriptedAction","script":"(function execute() {\n    // Add 1 to the search_count variable\n\tvaVars.search_count = vaVars.search_count + 1;\n})()\n","id":"9bf4486f1bcf4a36a3663df3f95ff2a4","name":"Update search_count","goal_id":"c3e72985ce6a491db0b589d349af2fc9","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Too Many Search Requests?","branches":[{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.search_count &lt; 3;\n})()\n"},"id":"79da029fa02249b8b8e48fcadb7aa350","name":"No"},{"type":"Branch","label":"yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.search_count &gt;= 3; \n})()\n"},"id":"a0edbcf316e842929bf96cef554c42d0","name":"yes"}],"id":"07392ad47aa242a89496b2ceba88acce","goal_id":"c3e72985ce6a491db0b589d349af2fc9"}],"edges":[{"type":"Edge","source_node_id":"98c8a2dacfb241e891c8e8e60fa7dc95","target_node_id":"79537b3a01324dd68f9e4937dd9698e1","id":"1d9979e8bcde4122ba9fdf002bbaf336"},{"type":"Edge","source_node_id":"a658110a0a5648f9ba7fd2f49473e0d1","target_node_id":"3ec51878f4ed448e81d313dc366e59e5","id":"57d145e6c0d9451aac1cc09ac9f3cc7f"},{"type":"Edge","source_node_id":"f6baf0ba8886488688c706f59084c793","target_node_id":"d1e61be74d0744d085db56d7f31c9b98","id":"5b82c81723634bca97d2005d77370053"},{"type":"Edge","source_node_id":"1c72ac645df14685a294621ede9aa36f","target_node_id":"0249c661ba9d47b1b2fe236e735762c8","id":"906e3bb4a01f43489640f5440fc7558b"},{"type":"Edge","source_node_id":"0249c661ba9d47b1b2fe236e735762c8","target_node_id":"dcfd967a5706455d83de01170f101794","id":"0116139edcbc4def873031ed4054d42d"},{"type":"Edge","source_node_id":"dcfd967a5706455d83de01170f101794","target_node_id":"8d17ef08a756404bb34b405e8581bc9a","id":"275a47917422477c96fbad5ac65af5ea"},{"type":"Edge","source_node_id":"8d17ef08a756404bb34b405e8581bc9a","target_node_id":"762737d6e67244f5b7c6bef69326a2b2","id":"bdc6df6a734d4266b1a5c51ba04f4790"},{"type":"Edge","source_node_id":"d1e61be74d0744d085db56d7f31c9b98","target_node_id":"929b0d7d80434eb682a5d11ec2b16dc0","branch_id":"92003a931eef412a8a975dc5bcaf8f32","id":"3eba0482bdbb48f7a70d75d8425d58b6","name":"92003a931eef412a8a975dc5bcaf8f32"},{"type":"Edge","source_node_id":"190cc26900ca4fc098b475fd2060f159","target_node_id":"a658110a0a5648f9ba7fd2f49473e0d1","id":"3bbaad54edef410884a976167507f428"},{"type":"Edge","source_node_id":"3ec51878f4ed448e81d313dc366e59e5","target_node_id":"79537b3a01324dd68f9e4937dd9698e1","id":"e236d3b515bd45b8a41e2cd9dedfa705"},{"type":"Edge","source_node_id":"79537b3a01324dd68f9e4937dd9698e1","target_node_id":"f6baf0ba8886488688c706f59084c793","id":"65308dfcd5e54e568e4126e10a0c2044"},{"type":"Edge","source_node_id":"f06875a5d1ac486a8fec785211e6d28f","target_node_id":"190cc26900ca4fc098b475fd2060f159","branch_id":"f423cffefb1c4c38b3b4fee2d8987713","id":"548f1ddddae246cdb7a2083a7c80145a","name":"f423cffefb1c4c38b3b4fee2d8987713"},{"type":"Edge","source_node_id":"762737d6e67244f5b7c6bef69326a2b2","target_node_id":"62c57f5150a445b0ac4ff95c019d9d0c","id":"43198d29b2ec41e69462b6b4efd422ec"},{"type":"Edge","source_node_id":"62c57f5150a445b0ac4ff95c019d9d0c","target_node_id":"f06875a5d1ac486a8fec785211e6d28f","id":"72e4c90c93314508bd9a1125e5f381f9"},{"type":"Edge","source_node_id":"f06875a5d1ac486a8fec785211e6d28f","target_node_id":"17767f6db4284709b0b5a4a107d553e7","branch_id":"1d701b2968af420f98f60debbeb19543","id":"6605e3e27d2d4e9690b11bfc677a4de3","name":"1d701b2968af420f98f60debbeb19543"},{"type":"Edge","source_node_id":"f06875a5d1ac486a8fec785211e6d28f","target_node_id":"224818aaf4d141b09d2edad8f6213d1d","branch_id":"a90c8297ad2e4b0baae718fe7e0177a9","id":"e6f43df23218433586cfc25d2cbc2eb3","name":"a90c8297ad2e4b0baae718fe7e0177a9"},{"type":"Edge","source_node_id":"224818aaf4d141b09d2edad8f6213d1d","target_node_id":"f6baf0ba8886488688c706f59084c793","id":"10fc40e8bc8944a9b07b7fc372cd2557"},{"type":"Edge","source_node_id":"17767f6db4284709b0b5a4a107d553e7","target_node_id":"741163ecc88d4ad69886c08c9d214c86","id":"3d53612908a24474ad388e970516768d"},{"type":"Edge","source_node_id":"741163ecc88d4ad69886c08c9d214c86","target_node_id":"98c8a2dacfb241e891c8e8e60fa7dc95","id":"3a215fc6d038461e9cefce37a66092b6"},{"type":"Edge","source_node_id":"d1e61be74d0744d085db56d7f31c9b98","target_node_id":"9bf4486f1bcf4a36a3663df3f95ff2a4","branch_id":"530aae7fd7774b55b3a9e47fca476fd2","id":"37e7870ea48f4464a5c5ee594f773403","name":"530aae7fd7774b55b3a9e47fca476fd2"},{"type":"Edge","source_node_id":"9bf4486f1bcf4a36a3663df3f95ff2a4","target_node_id":"07392ad47aa242a89496b2ceba88acce","id":"280e0e0c66024075bf8a47892f6b428b"},{"type":"Edge","source_node_id":"07392ad47aa242a89496b2ceba88acce","target_node_id":"0249c661ba9d47b1b2fe236e735762c8","branch_id":"79da029fa02249b8b8e48fcadb7aa350","id":"db5ee87e80414b65b8071a484f0b39c1","name":"79da029fa02249b8b8e48fcadb7aa350"},{"type":"Edge","source_node_id":"07392ad47aa242a89496b2ceba88acce","target_node_id":"929b0d7d80434eb682a5d11ec2b16dc0","branch_id":"a0edbcf316e842929bf96cef554c42d0","id":"0ac9374b8fbd487ca015ca1fbbc9dd39","name":"a0edbcf316e842929bf96cef554c42d0"}],"id":"c3e72985ce6a491db0b589d349af2fc9"}],"script_variables":[{"type":"String","name":"search_count","value":{"type":"String","mode":"string","value":"0"},"id":"61f91cb0cfe54f6f96f3082d09ec428f"}],"glide_variables":[{"type":"Choice","choices":[{"name":"Legal","element":"legal"},{"name":"Facilities","element":"facilities"},{"name":"Human Resources","element":"hr"}],"id":"315d582aa9624faabd40396f068d7084","name":"needit_type"},{"type":"Reference","table":"x_58872_needit_needit","id":"b8a70c06ddda4589810be72afb2c1099","name":"needit_list"},{"type":"True/False","id":"6c358ae98d2546cca40d0268f4279c2a","name":"search_again"},{"type":"Date/Time","mode":"date","id":"33a881c786f6400b86becbba815ebab0","name":"new_when_needed_date"},{"type":"Reference","table":"","id":"a2c67c7e210c4d25bb95e2aa57cd35c4","name":"change_when_needed_date"},{"type":"Choice","choices":[{"name":"Short Description","element":"short_description"},{"name":"When need it Date","element":"date"},{"name":"Nothing","element":"nothing"}],"id":"a1bc920cc0d54b639e9db6d5b20e5eef","name":"update_choice"},{"type":"String","name":"new_short_description","id":"7d692a7c58e64f5282474e4579aee7f4"},{"type":"Reference","table":"","id":"d7a5c77a72ce46c1aa5d1a079da3d61e","name":"change_short_description"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"d7a71d1cdbc30010ba19c4ab0b9619e4","id":"afdb1dd0db070010ba19c4ab0b96199a","name":"_PRVW__1950a5262487001029951ec2396af9fb","key_phrases":["Update NeedIt Records","update my record","update","NeedIt Request"],"nlu_provider":"","nlu_model":"","nlu_intent":"","flexible_conversation_switching":false,"design_category":"33f75114db070010ba19c4ab0b9619d4"}</design_definition>
        <design_topic_id>afdb1dd0db070010ba19c4ab0b96199a</design_topic_id>
        <name>_PRVW__1950a5262487001029951ec2396af9fb</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2020-02-21 15:32:31</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>1d50a526db870010ba19c4ab0b9619fe</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="NeedIt Virtual Agent Conversations" source="x_378094_needit_vi">d7a71d1cdbc30010ba19c4ab0b9619e4</sys_package>
        <sys_policy/>
        <sys_scope display_value="NeedIt Virtual Agent Conversations">d7a71d1cdbc30010ba19c4ab0b9619e4</sys_scope>
        <sys_update_name>sys_cb_design_topic_1d50a526db870010ba19c4ab0b9619fe</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2020-02-21 15:32:31</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
